# Обработка событий клавиатуры или мыши

## SYNOPSYS

```C
int    mlx_loop ( void *mlx_ptr );

int    mlx_key_hook ( void *win_ptr, int (*funct_ptr)(), void *param);

int    mlx_mouse_hook ( void *win_ptr, int (*funct_ptr)(), void *param);

int    mlx_expose_hook ( void *win_ptr, int (*funct_ptr)(), void *param);

int    mlx_loop_hook ( void *mlx_ptr, int (*funct_ptr)(), void *param);
```

## СОБЫТИЯ

Графические системы `X-Window` и `MacOSX` двунаправлены. С одной стороны, программа отправляет на экран приказы отображать пиксели, изображения и так далее. С другой стороны, они могут получать информацию с клавиатуры и мыши, связанных с экраном. Для этого программа получает «события» от клавиатуры или мыши.

## ОПИСАНИЕ
 
Чтобы получать события, вы должны использовать функцию `mlx_loop()`. Эта функция никогда не возвращает значение. Эта функция запускает бесконечный цикл, который ожидает события, а затем вызывает определяемую пользователем функцию, связанную с этим событием. Единственный параметр котрый ей требуется - идентификатор соединения `mlx_ptr` (см. [Руководства по mlx](man_mlx.md)).


Вы можете назначить различные функции для трех следующих событий:

* Нажата клавиша
* Кнопка мыши нажата
* Часть окна следует перерисовать (это называется событием «раскрыть», и ваша программа должна его обработать).


Каждое окно может определять разные функции для одного и того же события.

Три функции `mlx_key_hook()`, `mlx_mouse_hook()` и `mlx_expose_hook()` работают точно так же. `funct_ptr` - это указатель на функцию, которую вы хотите вызвать при возникновении события. Это назначение специфично для окна, определяемого идентификатором `win_ptr`. Адрес параметра будет передаваться функции каждый раз, когда она вызывается, и должен использоваться для хранения параметров, которые могут ей понадобиться.

Синтаксис функции `mlx_loop_hook()` идентичен предыдущим, но данная функция будет вызываться при отсутствии события.


При перехвате события `MiniLibX` вызывает соответствующую функцию с фиксированными параметрами:

* expose_hook(void *param);
* key_hook(int keycode,void *param);
* mouse_hook(int button,int x,int y,void *param);
* loop_hook(void *param);


Эти имена функций произвольны. Здесь они используются для различения параметров в зависимости от события. Эти функции НЕ являются частью `MiniLibX`.

`param` - это адрес, указанный в вызовах `mlx_*_hook`. Этот адрес никогда не используется и не изменяется `MiniLibX`. По событиям клавиш и мыши передается дополнительная информация: код клавиши сообщает вам, какая клавиша нажата (`X11`: найдите включаемый файл `keysymdef.h`, `macOS`: создайте небольшое программное обеспечение и узнайте сами), (x, y) координаты щелчка мыши в окне, а кнопка сообщает вам, какая кнопка мыши была нажата.



## ДАЛЬНЕЙШИЕ СОБЫТИЯ

MiniLibX обеспечивает универсальный доступ ко всем типам событий.

Включаемый файл `mlx.h` определяет `mlx_hook()` таким же образом, как работают функции `mlx _ * _hook`. Значения события и маски будут взяты из включаемого файла X11 `X.h` (даже для macOS в целях совместимости).      

> Смотри исходный код [mlx_int_param_event.c](./minilibx-linux/mlx_int_param_event.c) чтобы узнать, как `MiniLibX` вызовет вашу собственную функцию для определенного события.
       
## СМОТРИТЕ ТАКЖЕ

| [mlx(3)](man_mlx.md) | [mlx_new_window(3)](man_mlx_new_window.md) | [mlx_pixel_put(3)](man_mlx_pixel_put.md) | [mlx_new_image(3)](man_mlx_new_image.md) | [Руководство по использованию изображений в minilibX](how_use_images_in_mimilibx.md)

